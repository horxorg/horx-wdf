/** layui-v2.5.4 MIT License By https://www.layui.com */
 ;layui.define("form",function(e){"use strict";var i=layui.$,a=(layui.form,"tree"),n={config:{},index:layui[a]?layui[a].index+1e4:0,set:function(e){var a=this;return a.config=i.extend({},a.config,e),a},on:function(e,i){return layui.onevent.call(this,a,e,i)}},r=function(){var e=this,i=e.config,a=i.id||e.index;return r.that[a]=e,r.config[a]=i,{config:i,reload:function(i){e.reload.call(e,i)},getChecked:function(){return e.getChecked.call(e)},setChecked:function(i){return e.setChecked.call(e,i)}}},t="layui-hide",l="layui-disabled",s="layui-tree-set",d="layui-tree-iconClick",c="layui-icon-addition",o="layui-icon-subtraction",h="layui-tree-entry",u="layui-tree-main",f="layui-tree-txt",p="layui-tree-pack",v="layui-tree-spread",y="layui-tree-setLineShort",C="layui-tree-showLine",m="layui-tree-lineExtend",k=function(e){var a=this;a.index=++n.index,a.config=i.extend({},a.config,n.config,e),a.render()};k.prototype.config={data:[],showCheckbox:!1,showLine:!0,accordion:!1,onlyIconControl:!1,isJump:!1,edit:!1,text:{defaultNodeName:"未命名",none:"无数据"}},k.prototype.reload=function(e){var a=this;layui.each(e,function(e,i){i.constructor===Array&&delete a.config[e]}),a.config=i.extend(!0,{},a.config,e),a.render()},k.prototype.render=function(){var e=this,a=e.config,n=i('<div class="layui-tree'+(a.showCheckbox?" layui-form":"")+(a.showLine?" layui-tree-line":"")+'" lay-filter="LAY-tree-'+e.index+'"></div>');e.tree(n);var r=a.elem=i(a.elem);if(r[0]){if(a.showSearch&&n.prepend('<input type="text" class="layui-input layui-tree-search" placeholder="请输入关键字进行过滤">'),e.key=a.id||e.index,e.elem=n,e.elemNone=i('<div class="layui-tree-emptyText">'+a.text.none+"</div>"),r.html(e.elem),0==e.elem.find(".layui-tree-set").length)return e.elem.append(e.elemNone);a.drag&&e.drag(),a.showCheckbox&&e.renderForm("checkbox"),e.elem.find(".layui-tree-set").each(function(){var e=i(this);e.parent(".layui-tree-pack")[0]||e.addClass("layui-tree-setHide"),!e.next()[0]&&e.parents(".layui-tree-pack").eq(1).hasClass("layui-tree-lineExtend")&&e.addClass(y),e.next()[0]||e.parents(".layui-tree-set").eq(0).next()[0]||e.addClass(y)}),e.events()}},k.prototype.renderForm=function(e){layui.form.render(e,"LAY-tree-"+this.index)},k.prototype.tree=function(e,a){var n=this,r=n.config,d=a||r.data;layui.each(d,function(a,d){var c=d.children&&d.children.length>0,o=i('<div class="layui-tree-pack" '+(d.spread?'style="display: block;"':"")+'"></div>'),h=i(['<div data-id="'+d.id+'" class="layui-tree-set'+(d.spread?" layui-tree-spread":"")+(d.checked?" layui-tree-checkedFirst":"")+'">',"<div "+(r.drag&&!d.fixed?'draggable="true"':"")+' class="layui-tree-entry">','<div class="layui-tree-main">',function(){return r.showLine?c?'<span class="layui-tree-iconClick layui-tree-icon"><i class="layui-icon '+(d.spread?"layui-icon-subtraction":"layui-icon-addition")+'"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-icon layui-icon-file"></i></span>':'<span class="layui-tree-iconClick"><i class="layui-tree-iconArrow '+(c?"":t)+'"></i></span>'}(),function(){return r.showCheckbox?'<input type="checkbox" name="layuiTreeCheck" lay-skin="primary" '+(d.disabled?"disabled":"")+'  value="'+d.id+'">':""}(),function(){var e=r.multiStatus;if(!e)return"";var i=d.disabled?" "+l:"";return"<i class='treenode-status + "+e.baseClass+" "+e.statusList[0]["class"]+i+"' statusValue='"+e.statusList[0].value+"' idValue='"+d.id+"'></i>"}(),function(){return r.isJump&&d.href?'<a href="'+d.href+'" target="_blank" class="'+f+'">'+(d.title||d.label||r.text.defaultNodeName)+"</a>":'<span class="'+f+(d.disabled?" "+l:"")+'">'+(d.title||d.label||r.text.defaultNodeName)+"</span>"}(),"</div>",function(){if(!r.edit)return"";var e={add:'<i class="layui-icon layui-icon-add-1"  data-type="add"></i>',update:'<i class="layui-icon layui-icon-edit" data-type="update"></i>',del:'<i class="layui-icon layui-icon-delete" data-type="del"></i>'},i=['<div class="layui-btn-group layui-tree-btnGroup">'];return r.edit===!0&&(r.edit=["update","del"]),"object"==typeof r.edit?(layui.each(r.edit,function(a,n){i.push(e[n]||"")}),i.join("")+"</div>"):void 0}(),"</div></div>"].join(""));c&&(h.append(o),n.tree(o,d.children)),e.append(h),h.prev("."+s)[0]&&h.prev().children(".layui-tree-pack").addClass("layui-tree-showLine"),c||h.parent(".layui-tree-pack").addClass("layui-tree-lineExtend"),n.spread(h,d),r.showCheckbox&&n.checkClick(h,d),r.edit&&n.operate(h,d)})},k.prototype.spread=function(e,a){var n=this,r=n.config,t=e.children("."+h),y=t.children("."+u),C=t.find("."+d),m=t.find("."+f),k=r.onlyIconControl?C:y,g="";k.on("click",function(i){var n=e.children("."+p),t=k.children(".layui-icon")[0]?k.children(".layui-icon"):k.find(".layui-tree-icon").children(".layui-icon");if(n[0]){if(e.hasClass(v))e.removeClass(v),n.slideUp(200),t.removeClass(o).addClass(c);else if(e.addClass(v),n.slideDown(200),t.addClass(o).removeClass(c),r.accordion){var l=e.siblings("."+s);l.removeClass(v),l.children("."+p).slideUp(200),l.find(".layui-tree-icon").children(".layui-icon").removeClass(o).addClass(c)}}else g="normal";return r.iconClick&&r.iconClick({elem:e,state:g,data:a})}),m.on("click",function(){var n=i(this);if(!n.hasClass(l))return g=e.hasClass(v)?r.onlyIconControl?"open":"close":r.onlyIconControl?"close":"open",r.click&&r.click({elem:e,state:g,data:a})})},k.prototype.setCheckbox=function(e,i,a){var n=this,r=n.config,t=a.prop("checked"),l=r.checkChildren;if(null==l?l=!0:"function"==typeof l&&(l=l({data:i,elem:e})),l&&("object"==typeof i.children||e.find("."+p)[0])){var d=e.find("."+p).find('input[name="layuiTreeCheck"]');d.each(function(){this.disabled||(this.checked=t)})}var c=function(e){if(e.parents("."+s)[0]){var i,a=e.parent("."+p),n=a.parent(),r=a.prev().find('input[name="layuiTreeCheck"]');t?r.prop("checked",t):(a.find('input[name="layuiTreeCheck"]').each(function(){this.checked&&(i=!0)}),i||r.prop("checked",!1)),c(n)}},o=r.checkParent;null==o?o=!0:"function"==typeof o&&(o=o({data:i,elem:e})),o&&c(e),n.renderForm("checkbox")},k.prototype.checkClick=function(e,a){var n=this,r=n.config,t=e.children("."+h),l=t.children("."+u);l.on("click",'input[name="layuiTreeCheck"]+',function(t){layui.stope(t);var l=i(this).prev(),s=l.prop("checked");l.prop("disabled")||(n.setCheckbox(e,a,l),r.oncheck&&r.oncheck({elem:e,checked:s,data:a}))})},k.prototype.operate=function(e,a){var n=this,r=n.config,l=e.children("."+h),k=l.children("."+u);l.children(".layui-tree-btnGroup").on("click",".layui-icon",function(l){layui.stope(l);var u=i(this).data("type"),g=e.children("."+p),x={data:a,type:u,elem:e};if("add"==u){g[0]||(r.showLine?(k.find("."+d).addClass("layui-tree-icon"),k.find("."+d).children(".layui-icon").addClass(c).removeClass("layui-icon-file")):k.find(".layui-tree-iconArrow").removeClass(t),e.append('<div class="layui-tree-pack"></div>'));var b=r.operate&&r.operate(x),w={};if(w.title=r.text.defaultNodeName,w.id=b,n.tree(e.children("."+p),[w]),r.showLine)if(g[0])g.hasClass(m)||g.addClass(m),e.find("."+p).each(function(){i(this).children("."+s).last().addClass(y)}),g.children("."+s).last().prev().hasClass(y)?g.children("."+s).last().prev().removeClass(y):g.children("."+s).last().removeClass(y),!e.parent("."+p)[0]&&e.next()[0]&&g.children("."+s).last().removeClass(y);else{var L=e.siblings("."+s),T=1,N=e.parent("."+p);layui.each(L,function(e,a){i(a).children("."+p)[0]||(T=0)}),1==T?(L.children("."+p).addClass(C),L.children("."+p).children("."+s).removeClass(y),e.children("."+p).addClass(C),N.removeClass(m),N.children("."+s).last().children("."+p).children("."+s).last().addClass(y)):e.children("."+p).children("."+s).addClass(y)}if(!r.showCheckbox)return;if(k.find('input[name="layuiTreeCheck"]')[0].checked){var S=e.children("."+p).children("."+s).last();S.find('input[name="layuiTreeCheck"]')[0].checked=!0}n.renderForm("checkbox")}else if("update"==u){var V=k.children("."+f).html();k.children("."+f).html(""),k.append('<input type="text" class="layui-tree-editInput">'),k.children(".layui-tree-editInput").val(V).focus();var A=function(e){var i=e.val().trim();i=i?i:r.text.defaultNodeName,e.remove(),k.children("."+f).html(i),x.data.title=i,r.operate&&r.operate(x)};k.children(".layui-tree-editInput").blur(function(){A(i(this))}),k.children(".layui-tree-editInput").on("keydown",function(e){13===e.keyCode&&(e.preventDefault(),A(i(this)))})}else{if(r.operate&&r.operate(x),x.status="remove",!e.prev("."+s)[0]&&!e.next("."+s)[0]&&!e.parent("."+p)[0])return e.remove(),void n.elem.append(n.elemNone);if(e.siblings("."+s).children("."+h)[0]){if(r.showCheckbox){var q=function(e){if(e.parents("."+s)[0]){var a=e.siblings("."+s).children("."+h),r=e.parent("."+p).prev(),t=r.find('input[name="layuiTreeCheck"]')[0],l=1,d=0;0==t.checked&&(a.each(function(e,a){var n=i(a).find('input[name="layuiTreeCheck"]')[0];0!=n.checked||n.disabled||(l=0),n.disabled||(d=1)}),1==l&&1==d&&(t.checked=!0,n.renderForm("checkbox"),q(r.parent("."+s))))}};q(e)}if(r.showLine){var L=e.siblings("."+s),T=1,N=e.parent("."+p);layui.each(L,function(e,a){i(a).children("."+p)[0]||(T=0)}),1==T?(g[0]||(N.removeClass(m),L.children("."+p).addClass(C),L.children("."+p).children("."+s).removeClass(y)),e.next()[0]?N.children("."+s).last().children("."+p).children("."+s).last().addClass(y):e.prev().children("."+p).children("."+s).last().addClass(y),e.next()[0]||e.parents("."+s)[1]||e.parents("."+s).eq(0).next()[0]||e.prev("."+s).addClass(y)):!e.next()[0]&&e.hasClass(y)&&e.prev().addClass(y)}}else{var F=e.parent("."+p).prev();if(r.showLine){F.find("."+d).removeClass("layui-tree-icon"),F.find("."+d).children(".layui-icon").removeClass(o).addClass("layui-icon-file");var I=F.parents("."+p).eq(0);I.addClass(m),I.children("."+s).each(function(){i(this).children("."+p).children("."+s).last().addClass(y)})}else F.find(".layui-tree-iconArrow").addClass(t);e.parents("."+s).eq(0).removeClass(v),e.parent("."+p).remove()}e.remove()}})},k.prototype.drag=function(){var e=this,a=e.config;e.elem.on("dragstart","."+h,function(){var e=i(this).parent("."+s),n=e.parents("."+s)[0]?e.parents("."+s).eq(0):"未找到父节点";a.dragstart&&a.dragstart(e,n)}),e.elem.on("dragend","."+h,function(n){var n=n||event,r=n.clientY,l=i(this),u=l.parent("."+s),f=u.height(),k=u.offset().top,g=e.elem.find("."+s),x=e.elem.height(),b=e.elem.offset().top,w=x+b-13,L=u.parents("."+s)[0],T=u.next()[0];if(L)var N=u.parent("."+p),S=u.parents("."+s).eq(0),V=S.parent("."+p),A=S.offset().top,q=u.siblings(),F=S.children("."+p).children("."+s).length;var I=function(n){if(L||T||e.elem.children("."+s).last().children("."+p).children("."+s).last().addClass(y),!L)return void u.removeClass("layui-tree-setHide");if(1==F)a.showLine?(n.find("."+d).removeClass("layui-tree-icon"),n.find("."+d).children(".layui-icon").removeClass(o).addClass("layui-icon-file"),V.addClass(m),V.children("."+s).children("."+p).each(function(){i(this).children("."+s).last().addClass(y)})):n.find(".layui-tree-iconArrow").addClass(t),n.children("."+p).remove(),n.removeClass(v);else{if(a.showLine){var r=1;layui.each(q,function(e,a){i(a).children("."+p)[0]||(r=0)}),1==r?(u.children("."+p)[0]||(N.removeClass(m),q.children("."+p).addClass(C),q.children("."+p).children("."+s).removeClass(y)),N.children("."+s).last().children("."+p).children("."+s).last().addClass(y),T||n.parents("."+s)[0]||n.next()[0]||N.children("."+s).last().addClass(y)):!T&&u.hasClass(y)&&N.children("."+s).last().addClass(y)}if(a.showCheckbox){var l=function(a){if(a){if(!a.parents("."+s)[0])return}else if(!n[0])return;var r=a?a.siblings().children("."+h):q.children("."+h),t=a?a.parent("."+p).prev():N.prev(),d=t.find('input[name="layuiTreeCheck"]')[0],c=1,o=0;0==d.checked&&(r.each(function(e,a){var n=i(a).find('input[name="layuiTreeCheck"]')[0];0!=n.checked||n.disabled||(c=0),n.disabled||(o=1)}),1==c&&1==o&&(d.checked=!0,e.renderForm("checkbox"),l(t.parent("."+s)||n)))};l()}}};g.each(function(){if(0!=i(this).height()){if(r>k&&r<k+f)return void(a.dragend&&a.dragend("drag error"));if(1==F&&r>A&&r<k+f)return void(a.dragend&&a.dragend("drag error"));var n=i(this).offset().top;if(r>n&&r<n+15){if(i(this).children("."+p)[0]||(a.showLine?(i(this).find("."+d).eq(0).addClass("layui-tree-icon"),i(this).find("."+d).eq(0).children(".layui-icon").addClass(c).removeClass("layui-icon-file")):i(this).find(".layui-tree-iconArrow").removeClass(t),i(this).append('<div class="layui-tree-pack"></div>')),i(this).children("."+p).append(u),I(S),a.showLine){var l=i(this).children("."+p).children("."+s);if(u.children("."+p).children("."+s).last().addClass(y),1==l.length){var o=i(this).siblings("."+s),v=1,g=i(this).parent("."+p);layui.each(o,function(e,a){i(a).children("."+p)[0]||(v=0)}),1==v?(o.children("."+p).addClass(C),o.children("."+p).children("."+s).removeClass(y),i(this).children("."+p).addClass(C),g.removeClass(m),g.children("."+s).last().children("."+p).children("."+s).last().addClass(y).removeClass("layui-tree-setHide")):i(this).children("."+p).children("."+s).addClass(y).removeClass("layui-tree-setHide")}else u.prev("."+s).hasClass(y)?(u.prev("."+s).removeClass(y),u.addClass(y)):(u.removeClass("layui-tree-setLineShort layui-tree-setHide"),u.children("."+p)[0]?u.prev("."+s).children("."+p).children("."+s).last().removeClass(y):u.siblings("."+s).find("."+p).each(function(){i(this).children("."+s).last().addClass(y)})),i(this).next()[0]||u.addClass(y)}if(a.showCheckbox&&i(this).children("."+h).find('input[name="layuiTreeCheck"]')[0].checked){var x=u.children("."+h);x.find('input[name="layuiTreeCheck"]+').click()}return a.dragend&&a.dragend("drag success",u,i(this)),!1}if(r<n){if(i(this).before(u),I(S),a.showLine){var b=u.children("."+p),L=i(this).parents("."+s).eq(0),T=L.children("."+p).children("."+s).last();if(b[0]){u.removeClass(y),b.children("."+s).last().removeClass(y);var o=u.siblings("."+s),v=1;layui.each(o,function(e,a){i(a).children("."+p)[0]||(v=0)}),1==v?L[0]&&(o.children("."+p).addClass(C),o.children("."+p).children("."+s).removeClass(y),T.children("."+p).children("."+s).last().addClass(y).removeClass(C)):u.children("."+p).children("."+s).last().addClass(y),!L.parent("."+p)[0]&&L.next()[0]&&T.removeClass(y)}else L.hasClass(m)||L.addClass(m),L.find("."+p).each(function(){i(this).children("."+s).last().addClass(y)});L[0]||(u.addClass("layui-tree-setHide"),u.children("."+p).children("."+s).last().removeClass(y))}if(L[0]&&a.showCheckbox&&L.children("."+h).find('input[name="layuiTreeCheck"]')[0].checked){var x=u.children("."+h);x.find('input[name="layuiTreeCheck"]+').click()}return a.dragend&&a.dragend("拖拽成功，插入目标节点上方",u,i(this)),!1}if(r>w)return e.elem.children("."+s).last().children("."+p).addClass(C),e.elem.append(u),I(S),u.prev().children("."+p).children("."+s).last().removeClass(y),u.addClass("layui-tree-setHide"),u.children("."+p).children("."+s).last().addClass(y),a.dragend&&a.dragend("拖拽成功，插入最外层节点",u,e.elem),!1}})})},k.prototype.events=function(){var e=this,a=e.config,n=e.elem.find(".layui-tree-checkedFirst");layui.each(n,function(e,a){i(a).children("."+h).find('input[name="layuiTreeCheck"]+').trigger("click")}),e.elem.find(".layui-tree-search").on("keyup",function(){var n=i(this),r=n.val(),l=n.nextAll(),d=[];l.find("."+f).each(function(){var e=i(this).parents("."+h);if(i(this).html().indexOf(r)!=-1){d.push(i(this).parent());var a=function(e){e.addClass("layui-tree-searchShow"),e.parent("."+p)[0]&&a(e.parent("."+p).parent("."+s))};a(e.parent("."+s))}}),l.find("."+h).each(function(){var e=i(this).parent("."+s);e.hasClass("layui-tree-searchShow")||e.addClass(t)}),0==l.find(".layui-tree-searchShow").length&&e.elem.append(e.elemNone),a.onsearch&&a.onsearch({elem:d})}),e.elem.find(".layui-tree-search").on("keydown",function(){i(this).nextAll().find("."+h).each(function(){var e=i(this).parent("."+s);e.removeClass("layui-tree-searchShow "+t)}),i(".layui-tree-emptyText")[0]&&i(".layui-tree-emptyText").remove()}),e.elem.find(".treenode-status").on("click",function(){var e=i(this);if(!e.hasClass(l)){for(var n=e.attr("statusValue"),r=a.multiStatus.statusList,t=0;t<r.length&&n!=r[t].value;t++);return e.removeClass(r[t]["class"]),t+=1,t>=r.length&&(t=0),e.addClass(r[t]["class"]),e.attr("statusValue",r[t].value),!1}})},k.prototype.getChecked=function(){function e(i){if(null==i||0==i.length)return!1;for(var a=0;a<i.length;a++){for(var n=!1,t=i[a],l=0;l<r.length;l++)if(t.id==r[l]){n=!0;break}if(n)return!0;var s=e(t.children);if(s)return!0}return!1}var a=this,n=a.config,r=[],t=[];a.elem.find(".layui-form-checked").each(function(){r.push(i(this).prev()[0].value)});var l=function(a,n){layui.each(a,function(a,t){var s=!1;if(layui.each(r,function(e,a){if(t.id==a){var r=i.extend({},t);return delete r.children,n.push(r),t.children&&(r.children=[],l(t.children,r.children)),s=!0,!0}}),!s&&(s=e(t.children))){var d=i.extend({},t);delete d.children,d.unchecked=!0,n.push(d),t.children&&(d.children=[],l(t.children,d.children))}})};return l(i.extend({},n.data),t),t},k.prototype.setChecked=function(e){var a=this;a.config;a.elem.find("."+s).each(function(a,n){var r=i(this).data("id"),t=i(n).children("."+h).find('input[name="layuiTreeCheck"]'),l=t.next();if("number"==typeof e){if(r==e)return t[0].checked||l.click(),!1}else i.inArray(r,e)!=-1&&(t[0].checked||l.click())})},r.that={},r.config={},n.reload=function(e,i){var a=r.that[e];return a.reload(i),r.call(a)},n.getChecked=function(e){var i=r.that[e];return i.getChecked()},n.setChecked=function(e,i){var a=r.that[e];return a.setChecked(i)},n.setStatusValue=function(e,i){var a=r.that[e],n=a.config,t=n.multiStatus.statusList;for(var l in i){var s=i[l],d=a.elem.find(".treenode-status[idValue='"+l+"']");if(0!=d.length){var c=d.attr("statusValue");if(c!=s){for(var o=null,h=null,u=0;u<t.length;u++){var f=t[u];if(c==f.value){if(o=f,null!=h)break}else if(s==f.value&&(h=f,null!=o))break}null!=o&&null!=h&&(d.removeClass(o["class"]),d.addClass(h["class"]),d.attr("statusValue",h.value))}}}},n.getStatusValue=function(e,a){for(var n=r.that[e],t="",l=0;l<a.length;l++)l>0&&(t+=","),t=t+".treenode-status[statusValue='"+a[l]+"']";var s={};return n.elem.find(t).each(function(){var e=i(this);s[e.attr("idValue")]=e.attr("statusValue")}),s},n.render=function(e){var i=new k(e);return r.call(i)},e(a,n)});